{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/omnyx2/Develope/ReactSideProject/realtime-chat-react-graphql/realtime-chat-client/src/Chat.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { ApolloClient, InMemoryCache, ApolloProvider, gql, useQuery, useMutation, useSubscription } from '@apollo/client';\nimport { WebSocketLink } from '@apollo/client/link/ws';\nimport styled from 'styled-components';\nconst GET_MESSAGES = gql`\nsubscription {\n  messages {\n    id\n    content\n    user\n  }\n}`;\nconst POST_MESSAGE = gql`\n  mutation ($user: String!, $content: String!){\n    postMessage(user: $user, content: $content)\n  }`;\nconst Button = styled.button`\n  \n  border-radius: 3px;\n  border: 1px solid #FFFFFF;\n  background: #ffffff;\n  box-shadow:  10px 10px 20px #d9d9d9, -10px -10px 20px #ffffff;\n`;\n_c = Button;\nconst Input = styled.input`\n  border-radius: 5px;\n  margin-right: 30px;\n  margin-top: 30px;\n  border: 1px solid #FFFFFF;\n  background: #ffffff;\n  box-shadow:  10px 10px 20px #d9d9d9, -10px -10px 20px #ffffff;\n  font-size: 12pt;\n  text-align: left;\n  color: #63717f;\n`;\n_c2 = Input;\nconst link = new WebSocketLink({\n  uri: 'ws://localhost:4000/',\n  options: {\n    reconnect: true\n  }\n});\nconst client = new ApolloClient({\n  link,\n  uri: \"http://localhost:4000/\",\n  cache: new InMemoryCache()\n});\n\nconst Messages = ({\n  user\n}) => {\n  _s();\n\n  const {\n    data\n  } = useSubscription(GET_MESSAGES);\n\n  if (!data) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: data.messages.map(({\n      id,\n      user: messageUser,\n      content\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: user === messageUser ? \"flex-end\" : \"flex-start\",\n        paddingBottom: \"1em\"\n      },\n      children: [user !== messageUser && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 50,\n          width: 50,\n          marginRight: '0.5em',\n          border: '2px solid #e5e6ea',\n          borderRadius: 25,\n          textAlign: \"center\",\n          fontSize: \"18pt\",\n          paddingTop: 5\n        },\n        children: messageUser.slice(0, 2).toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: user === messageUser ? \"#58bf56\" : \"#e5e6ea\",\n          color: user === messageUser ? \"white\" : \"black\",\n          padding: \"1em\",\n          borderRadius: \"1em\",\n          maxWidth: \"60%\"\n        },\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }, this))\n  }, void 0, false);\n};\n\n_s(Messages, \"5LK+53Oia6K8c0VFEgmT72QLLdU=\", false, function () {\n  return [useSubscription];\n});\n\n_c3 = Messages;\n\nconst Chat = () => {\n  _s2();\n\n  const [state, stateSet] = React.useState({\n    user: \"Jack\",\n    content: ''\n  });\n  const [postMessage] = useMutation(POST_MESSAGE);\n\n  const onSend = () => {\n    if (state.content.length > 0) {\n      postMessage({\n        variables: state\n      });\n    }\n\n    stateSet({ ...state,\n      content: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Messages, {\n      user: state.user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      label: \"User\",\n      value: state.user,\n      onChange: evt => stateSet({ ...state,\n        user: evt.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      label: \"Content\",\n      value: state.content,\n      onChange: evt => stateSet({ ...state,\n        content: evt.target.value\n      }),\n      onKeyUp: evt => {\n        if (evt.keyCode == 13) {\n          onSend();\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => onSend(),\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(Chat, \"2pW5Khf4lLLOqkKZVNJsHh+Dcpg=\", false, function () {\n  return [useMutation];\n});\n\n_c4 = Chat;\nexport default (() => /*#__PURE__*/_jsxDEV(ApolloProvider, {\n  client: client,\n  children: /*#__PURE__*/_jsxDEV(Chat, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 7\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 162,\n  columnNumber: 3\n}, this));\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Button\");\n$RefreshReg$(_c2, \"Input\");\n$RefreshReg$(_c3, \"Messages\");\n$RefreshReg$(_c4, \"Chat\");","map":{"version":3,"sources":["/Users/omnyx2/Develope/ReactSideProject/realtime-chat-react-graphql/realtime-chat-client/src/Chat.js"],"names":["React","useState","ApolloClient","InMemoryCache","ApolloProvider","gql","useQuery","useMutation","useSubscription","WebSocketLink","styled","GET_MESSAGES","POST_MESSAGE","Button","button","Input","input","link","uri","options","reconnect","client","cache","Messages","user","data","messages","map","id","messageUser","content","display","justifyContent","paddingBottom","height","width","marginRight","border","borderRadius","textAlign","fontSize","paddingTop","slice","toUpperCase","background","color","padding","maxWidth","Chat","state","stateSet","postMessage","onSend","length","variables","evt","target","value","keyCode"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { \n    ApolloClient,\n    InMemoryCache,\n    ApolloProvider,\n    gql,\n    useQuery,\n    useMutation,\n    useSubscription\n} from '@apollo/client';\nimport { WebSocketLink } from '@apollo/client/link/ws';\nimport styled from 'styled-components';\n\nconst GET_MESSAGES = gql`\nsubscription {\n  messages {\n    id\n    content\n    user\n  }\n}`;\n\nconst POST_MESSAGE = gql`\n  mutation ($user: String!, $content: String!){\n    postMessage(user: $user, content: $content)\n  }`;\n\n\nconst Button = styled.button`\n  \n  border-radius: 3px;\n  border: 1px solid #FFFFFF;\n  background: #ffffff;\n  box-shadow:  10px 10px 20px #d9d9d9, -10px -10px 20px #ffffff;\n`;\n\n\nconst Input = styled.input`\n  border-radius: 5px;\n  margin-right: 30px;\n  margin-top: 30px;\n  border: 1px solid #FFFFFF;\n  background: #ffffff;\n  box-shadow:  10px 10px 20px #d9d9d9, -10px -10px 20px #ffffff;\n  font-size: 12pt;\n  text-align: left;\n  color: #63717f;\n`;\n\nconst link = new WebSocketLink({\n  uri: 'ws://localhost:4000/',\n  options: {\n    reconnect: true\n  }\n});\n\nconst client = new ApolloClient({\n    link,\n    uri: \"http://localhost:4000/\",\n    cache: new InMemoryCache()\n});\n\nconst Messages = ({ user }) => {\n    const  { data } = useSubscription(GET_MESSAGES);\n    if( !data ) {\n        return null;\n    }\n\n    return (\n        <>\n          { data.messages.map(({ id, user: messageUser, content }) => (\n              <div \n                style={{\n                    display: 'flex',\n                    justifyContent: user === messageUser ? \"flex-end\" : \"flex-start\",\n                    paddingBottom: \"1em\",\n                }}\n              >\n              { user !== messageUser && (\n                  <div \n                  style={{\n                      height: 50,\n                          width: 50,\n                          marginRight: '0.5em', \n                          border: '2px solid #e5e6ea',\n                          borderRadius: 25,\n                          textAlign: \"center\",\n                          fontSize: \"18pt\",\n                          paddingTop: 5,\n                  }}\n                  >   \n                  {\n                      messageUser.slice(0, 2).toUpperCase()\n                  }\n                  </div>\n              )}\n\n              <div\n                style={{\n                    background: user === messageUser ? \"#58bf56\" : \"#e5e6ea\",\n                    color: user === messageUser ? \"white\" : \"black\",\n                    padding: \"1em\",\n                    borderRadius: \"1em\",\n                    maxWidth: \"60%\",\n                }}\n              >\n                { content }\n             </div>  \n            </div>\n          ))}\n        </>\n        )\n}\n\n\nconst Chat = () => {\n    const [state, stateSet] = React.useState({\n        user: \"Jack\",\n        content: '',\n    })\n    const [postMessage] = useMutation(POST_MESSAGE);\n    const onSend = () => {\n        if(state.content.length > 0) {\n          postMessage({ \n              variables: state,\n          })\n        }\n        stateSet({\n            ...state,\n            content: \"\",\n        })\n      \n    }\n    return (\n        <div>\n            <Messages user={state.user}/>\n            <Input\n                label=\"User\"\n                value={state.user}\n                onChange={(evt) => stateSet({\n                    ...state,\n                    user: evt.target.value,\n                })}/>\n            <Input\n                label=\"Content\"\n                value={state.content}\n                onChange={(evt) => stateSet({\n                    ...state,\n                    content: evt.target.value,\n                })}\n                onKeyUp={(evt) => {\n                    if( evt.keyCode == 13) {\n                        onSend()\n                    }}}\n            />\n                <Button onClick={()=> onSend()}>Send</Button>\n        </div>\n  )\n}\n\nexport default () => (\n  <ApolloProvider client={client}>\n      <Chat />\n  </ApolloProvider>\n)\n"]},"metadata":{},"sourceType":"module"}